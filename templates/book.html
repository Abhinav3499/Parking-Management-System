<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book</title>
</head>
<body>
    <h1>Book a Parking Spot</h1>
    <form action="/user/book" method="POST">
        <label for="location_id">Select Location:</label>
        <select id="location_id" name="location_id" required>
            {% for location in locations %}
                <option value="{{ location.id }}">{{ location.name }} ({{ location.address }}, {{ location.pin }})</option>
            {% endfor %}
        </select>
        <input type="submit" value="Search Parking Lots">
    </form>
    <br>
    {% if parking_lots %}
        <h2>Available Parking Lots</h2>
        <ul>
        {% for lot in parking_lots %}
            <li>
                Lot ID: {{ lot.id }}, Total Spots: {{ lot.total_spots }}, Price: {{ lot.price }}
                <form action="/user/book/confirm" method="POST" style="display:inline;">
                    <input type="hidden" name="lot_id" value="{{ lot.id }}">
                    <input type="text" name="vehicle_number" placeholder="Vehicle Number" required>
                    <button type="submit">Book</button>
                </form>
            </li>
        {% endfor %}
        </ul>
    {% endif %}
</body>
</html>
